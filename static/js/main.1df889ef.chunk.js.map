{"version":3,"sources":["model/index.ts","constants.ts","components/Board/layout.ts","components/Board/Board.tsx","components/Dropzone/layout.ts","components/Dropzone/Dropzone.tsx","components/Button.tsx","utils/player.ts","utils/board.ts","ai/minimax.ts","components/ConnectFour.tsx","components/App.tsx","serviceWorker.js","index.tsx"],"names":["Player","BOARD_ROWS","WINNING_LENGTH","EMPTY_BOARD","Array","fill","BOARD_CELLS","flatMap","column","colIndex","map","_","rowIndex","row","col","MATCH_CELLS","c","reduce","result","r","match","push","i","PLAYER_COLORS","_PLAYER_COLORS","Object","defineProperty","One","Two","Grid","styled","div","_templateObject","BoardGridItem","_templateObject2","p","HighlightedGridItem","_templateObject3","TokenGridItem","_templateObject4","playerColor","Board","props","react_default","a","createElement","_ref","key","concat","tokens","tokenColumn","player","_ref2","highlightedCells","_ref3","renderHighlightedGridItems","Columns","layout_templateObject","ActiveColumn","button","layout_templateObject2","DisabledColumn","layout_templateObject3","Dropzone","currentPlayer","onClickColumn","isDisabled","columnsRef","useRef","ref","tabIndex","onClick","renderColumns","current","focus","Button","Button_templateObject","togglePlayer","getPlayerAtCell","board","cell","checkWinnerFromCell","next","arr","players","cells","nextCell","every","val","checkVertical","root","inc","checkHorizontal","checkDiagonalDown","checkDiagonalUp","findWinningCells","length","winningCells","find","copyBoard","toConsumableArray","isFullBoard","validBoardMoves","ai_minimax","nextMove","bestScore","Number","MIN_SAFE_INTEGER","bestMove","forEach","nextBoard","score","minimax","isMaxPlayer","depth","arguments","undefined","isWinningBoard","maxPlayer","filledBoard","matchCells","minPlayer","includes","playerCount","filter","Math","pow","scoreBoard","evaluate","MAX_SAFE_INTEGER","max","min","ConnectFour","_useState","useState","_useState2","slicedToArray","setCurrentPlayer","_useState3","_useState4","setTokens","_useState5","_useState6","setWinningCells","_useState7","isPlayerOneHuman","_useState9","isPlayerTwoHuman","useEffect","isGameOver","shouldAiOneMove","shouldAiTwoMove","Minimax","dropToken","nextTokens","Dropzone_Dropzone","Board_Board","App","ConnectFour_ConnectFour","isLocalhost","Boolean","window","location","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","console","log","onUpdate","onSuccess","catch","error","ReactDOM","render","components_App","document","getElementById","URL","process","href","origin","addEventListener","fetch","response","contentType","headers","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.1df889ef.chunk.js","sourcesContent":["export enum Player {\n  One = 1,\n  Two = 2,\n}\n\nexport interface Cell {\n  row: number;\n  col: number;\n}\n","import { Player, Cell } from './model'\n\nexport const BOARD_COLUMNS = 7\nexport const BOARD_ROWS = 6\nexport const WINNING_LENGTH = 4\n\nexport const EMPTY_BOARD: Player[][] = Array(BOARD_COLUMNS).fill([])\n\nexport const BOARD_CELLS: Cell[] =\n  Array(BOARD_COLUMNS).fill(Array(BOARD_ROWS).fill(null))\n    .flatMap((column: void[], colIndex: number) => {\n      return column.map((_:void, rowIndex: number) => {\n        return { row: rowIndex, col: colIndex }\n    })\n  })\n\nexport const MATCH_CELLS: Cell[][] =\n  Array(BOARD_COLUMNS).fill(Array(BOARD_ROWS).fill(null))\n    .flatMap((column: any[], c: number) => {\n      return column.reduce((result: Cell[][], _:void, r: number) => {\n        const match = Array(WINNING_LENGTH).fill(null)\n\n        // Horizontal match\n        if (c <= BOARD_COLUMNS - WINNING_LENGTH) {\n          result.push(match.map((_, i) => ({ row: r, col: c + i })))\n        }\n\n        // Vertical match\n        if (r <= BOARD_ROWS - WINNING_LENGTH) {\n          result.push(match.map((_, i) => ({ row: r + i, col: c })))\n        }\n\n        // Diagonal (positive slope) match\n        if ((c <= BOARD_COLUMNS - WINNING_LENGTH) && (r <= BOARD_ROWS - WINNING_LENGTH)) {\n          result.push(match.map((_, i) => ({ row: r + i, col: c + i })))\n        }\n\n        // Diagonal (negative slope) match\n        if ((c <= BOARD_COLUMNS - WINNING_LENGTH) && (r >= WINNING_LENGTH - 1)) {\n          result.push(match.map((_, i) => ({ row: r - i, col: c + i })))\n        }\n\n        return result\n      }, [])\n    })\n\nexport const PLAYER_COLORS: { [player: number]: string } = {\n  [Player.One]: '#ff636e',\n  [Player.Two]: '#ffca56',\n}\n","import styled from 'styled-components'\nimport { BOARD_ROWS, BOARD_COLUMNS } from '../../constants'\n\nexport const Grid = styled.div`\n  display: grid;\n  grid-template-columns: repeat(${BOARD_COLUMNS}, 50px);\n  grid-template-rows: repeat(${BOARD_ROWS}, 50px);\n  grid-gap: 8px;\n`\n\nexport const BoardGridItem = styled.div<{ row: number, col: number }>`\n  position: relative;\n  grid-row: ${p => p.row};\n  grid-column: ${p => p.col};\n  box-sizing: border-box;\n  border: 3px solid #6edfff;\n  border-radius: 50%;\n  z-index: 0;\n`\n\nexport const HighlightedGridItem = styled.div<{ row: number, col: number }>`\n  position: relative;\n  grid-row: ${p => p.row};\n  grid-column: ${p => p.col};\n  box-sizing: border-box;\n  border: 3px solid #ebffff;\n  border-radius: 50%;\n  box-shadow: 0 0 6px 2px #ebffff55;\n  z-index: 2;\n`\n\nexport const TokenGridItem = styled.div<{ row: number, col: number, playerColor: string }>`\n  position: relative;\n  grid-row: ${p => p.row};\n  grid-column: ${p => p.col};\n  background-color: ${p => p.playerColor};\n  border-radius: 50%;\n  overflow: hidden;\n  z-index: 1;\n`\n","import React from 'react'\nimport { Player, Cell } from '../../model'\nimport { PLAYER_COLORS, BOARD_ROWS, BOARD_CELLS } from '../../constants'\nimport { Grid, BoardGridItem, HighlightedGridItem, TokenGridItem } from './layout'\n\ninterface Props {\n  tokens: Player[][];\n  highlightedCells: Cell[] | null;\n}\n\nconst renderBoardGridItems = () => {\n  return BOARD_CELLS.map(({ row, col }) => (\n    <BoardGridItem\n      row={row + 1}\n      col={col + 1}\n      key={`boardGridItem(${row},${col})`}\n    />\n  ))\n}\n\nconst renderHighlightedGridItems = ({ highlightedCells }: Props) => {\n  return highlightedCells && highlightedCells.map(({ row, col }) => (\n    <HighlightedGridItem\n      row={BOARD_ROWS - row}\n      col={col + 1}\n      key={`highlightedGridItem(${row},${col})`}\n    />\n  ))\n}\n\nconst renderTokenGridItems = ({ tokens }: Props) => {\n  return tokens.map((tokenColumn, col) => {\n    return tokenColumn.map((player, row) => (\n      <TokenGridItem\n        row={BOARD_ROWS - row}\n        col={col + 1}\n        playerColor={PLAYER_COLORS[player]}\n        key={`tokenGridItem(${row},${col})`}\n      />\n    ))\n  })\n}\n\nexport const Board = (props: Props) => (\n  <Grid>\n    {renderBoardGridItems()}\n    {renderTokenGridItems(props)}\n    {renderHighlightedGridItems(props)}\n  </Grid>\n)\n","import styled from 'styled-components'\nimport { PLAYER_COLORS, BOARD_COLUMNS } from '../../constants'\n\nexport const Columns = styled.div`\n  display: grid;\n  grid-template-columns: repeat(${BOARD_COLUMNS}, 50px);\n  grid-template-rows: 50px;\n  grid-gap: 8px;\n  margin-bottom: 8px;\n\n  &:focus {\n    outline: none;\n  }\n`\n\n\nexport const ActiveColumn = styled.button<{ playerColor: string }>`\n  cursor: pointer;\n  border-radius: 50%;\n  overflow: hidden;\n  background-color: transparent;\n  border: 3px dashed ${p => p.playerColor};\n  box-sizing: border-box;\n\n  &:hover, &:focus {\n    outline: none;\n    background-color: ${p => p.playerColor};\n  }\n`\n\nexport const DisabledColumn = styled.div`\n  border-radius: 50%;\n  overflow: hidden;\n  background-color: transparent;\n  border: 3px dashed #32464e;\n  box-sizing: border-box;\n`\n","import React, { useRef } from 'react'\nimport { Player } from '../../model'\nimport { PLAYER_COLORS, BOARD_COLUMNS } from '../../constants'\nimport { Columns, ActiveColumn, DisabledColumn } from './layout'\n\ninterface Props {\n  currentPlayer: Player;\n  onClickColumn: (index: number) => void;\n  isDisabled: boolean;\n}\n\nconst renderColumns = (currentPlayer: Player, onClickColumn: (colIndex: number) => void, isDisabled: boolean) => {\n  return Array(BOARD_COLUMNS).fill(null).map((_: void, col) => {\n    if (isDisabled) {\n      return <DisabledColumn key={col} />\n    }\n\n    return (\n      <ActiveColumn\n        playerColor={PLAYER_COLORS[currentPlayer]}\n        onClick={() => onClickColumn(col)}\n        key={col}\n      />\n    )\n  })\n}\n\nexport const Dropzone = ({ currentPlayer, onClickColumn, isDisabled }: Props) => {\n  const columnsRef = useRef<HTMLElement>(null)\n\n  const handleColumnClick = (col: number): void => {\n    if (columnsRef.current) {\n      columnsRef.current.focus()\n    }\n    \n    onClickColumn(col)\n  }\n\n  return (\n    <Columns ref={columnsRef as any} tabIndex={-1}>\n      {renderColumns(currentPlayer, handleColumnClick, isDisabled)}\n    </Columns>\n  )\n}\n","import styled from 'styled-components'\n\nexport const Button = styled.button`\n  font-family: 'Lato', sans-serif;\n  font-size: 18px;\n  padding: 8px;\n  margin: 12px 0;\n  width: 100%;\n  color: #4d6e7b;\n  border-radius: 5px;\n  outline: none;\n  background: transparent;\n  border: 2px solid transparent;\n  cursor: pointer;\n  transition: all 0.3s ease;\n\n  &:hover {\n    color: #243239;\n    background: #4d6e7b;\n  }\n\n  &:focus {\n    border-color: #4d6e7b; \n  }\n`\n","import { Player } from '../model'\n\nexport function togglePlayer(player: Player): Player {\n  return player === Player.One ? Player.Two : Player.One\n}\n","import { Player, Cell } from '../model'\nimport { BOARD_ROWS, MATCH_CELLS, WINNING_LENGTH } from '../constants'\nimport { togglePlayer } from './player';\n\nfunction allEqual(arr: any[]): boolean {\n  return arr.every(val => val === arr[0])\n}\n\nfunction getPlayerAtCell(board: Player[][], cell: Cell): Player {\n  const { row, col } = cell\n  return board[col] && board[col][row]\n}\n\nfunction checkWinnerFromCell(board: Player[][], cell: Cell, next: (root: Cell, inc: number) => Cell ): Cell[] {\n  const players: Player[] = []\n  const cells: Cell[] = []\n\n  for (let i = 0; i < WINNING_LENGTH; i++) {\n    const nextCell = next(cell, i)\n    players.push(getPlayerAtCell(board, nextCell))\n    cells.push(nextCell)\n  }\n\n  return allEqual(players) ? cells : []\n}\n\nfunction checkVertical(board: Player[][], cell: Cell): Cell[] {\n  return checkWinnerFromCell(board, cell, (root, inc) => ({\n    row: root.row + inc,\n    col: root.col,\n  }))\n}\n\nfunction checkHorizontal(board: Player[][], cell: Cell): Cell[] {\n  return checkWinnerFromCell(board, cell, (root, inc) => ({\n    row: root.row,\n    col: root.col + inc,\n  }))\n}\n\nfunction checkDiagonalDown(board: Player[][], cell: Cell): Cell[] {\n  return checkWinnerFromCell(board, cell, (root, inc) => ({\n    row: root.row - inc,\n    col: root.col + inc,\n  }))\n}\n\nfunction checkDiagonalUp(board: Player[][], cell: Cell): Cell[] {\n  return checkWinnerFromCell(board, cell, (root, inc) => ({\n    row: root.row + inc,\n    col: root.col + inc,\n  }))\n}\n\nexport function findWinningCells(board: Player[][], player?: Player): Cell[] {\n  for (let col = 0; col < board.length; col++) {\n    for (let row = 0; row < board[col].length; row++) {\n      const cell = { row, col }\n      const winningCells = [\n        checkVertical(board, cell),\n        checkHorizontal(board, cell),\n        checkDiagonalUp(board, cell),\n        checkDiagonalDown(board, cell),\n      ].find(cells => cells && cells.length > 0)\n\n      if (winningCells) {\n        if (!player ||  player === getPlayerAtCell(board, cell)) {\n          return winningCells\n        }\n      }\n    }\n  }\n\n  return []\n}\n\nexport function copyBoard(board: Player[][]): Player[][] {\n  return board.map(tokenColumn => [...tokenColumn])\n}\n\nexport function isWinningBoard(board: Player[][], player?: Player): boolean {\n  return findWinningCells(board, player).length > 0\n}\n\nexport function isFullBoard(board: Player[][]): boolean {\n  return board.every(tokenColumn => {\n    return tokenColumn.length === BOARD_ROWS\n  })\n}\n\nexport function validBoardMoves(board: Player[][]): number[] {\n  return board.reduce((result, tokenColumn, i) => {\n    if (tokenColumn.length < BOARD_ROWS) {\n      result.push(i)\n    }\n    \n    return result\n  }, [])\n}\n\nexport function scoreBoard(board: Player[][], maxPlayer: Player): number {\n  const filledBoard: (Player | null)[][] = board.map(tokenColumn => {\n    return [...tokenColumn, ...Array(BOARD_ROWS - tokenColumn.length).fill(null)]\n  })\n\n  let result = 0\n\n  MATCH_CELLS.forEach(matchCells => {\n    const match = matchCells.map(cell => filledBoard[cell.col][cell.row])\n    const minPlayer = togglePlayer(maxPlayer)\n\n    if (!match.includes(minPlayer)) {\n      const playerCount = match.filter(p => p === maxPlayer).length\n      result += 16 ** playerCount\n    }\n    \n    if (!match.includes(maxPlayer)) {\n      const playerCount = match.filter(p => p === minPlayer).length\n      result -= 16 ** playerCount\n    }\n  })\n\n  return result\n}\n","import { Player } from '../model'\nimport { copyBoard, isFullBoard, isWinningBoard, scoreBoard, togglePlayer, validBoardMoves } from '../utils'\n\nfunction nextMove(board: Player[][], player: Player): number {\n  let bestScore = Number.MIN_SAFE_INTEGER\n  let bestMove = 0\n\n  validBoardMoves(board).forEach(col => {\n    const nextBoard = copyBoard(board)\n    nextBoard[col].push(player)\n\n    const score = minimax(nextBoard, togglePlayer(player), false)\n\n    if (score > bestScore) {\n      bestScore = score\n      bestMove = col\n    }\n  })\n\n  return bestMove\n}\n\nfunction minimax(board: Player[][], player: Player, isMaxPlayer: boolean, depth: number = 5): number {\n  if (isFullBoard(board) || isWinningBoard(board) || depth < 1) {\n    return evaluate(board, player, isMaxPlayer)\n  }\n\n  let bestScore = isMaxPlayer ? Number.MIN_SAFE_INTEGER : Number.MAX_SAFE_INTEGER\n\n  validBoardMoves(board).forEach(col => {\n    const nextBoard = copyBoard(board)\n    nextBoard[col].push(player)\n    const score = minimax(nextBoard, togglePlayer(player), !isMaxPlayer, depth - 1)\n    bestScore = isMaxPlayer ? Math.max(bestScore, score) : Math.min(bestScore, score)\n  })\n\n  return bestScore\n}\n\nfunction evaluate(board: Player[][], player: Player, isMaxPlayer: boolean): number {\n  const maxPlayer = isMaxPlayer ? player : togglePlayer(player)\n  return scoreBoard(board, maxPlayer)\n}\n\nexport default { nextMove }\n","import React, { useState, useEffect } from 'react';\nimport { Board } from './Board'\nimport { Dropzone } from './Dropzone'\nimport { Button } from './Button'\nimport { Player, Cell } from '../model'\nimport { BOARD_ROWS, EMPTY_BOARD } from '../constants'\nimport { copyBoard, isFullBoard, togglePlayer, findWinningCells } from '../utils'\nimport { Minimax } from '../ai'\n\nexport const ConnectFour = () => {\n  const [ currentPlayer, setCurrentPlayer ] = useState<Player>(Player.One)\n  const [ tokens, setTokens ] = useState<Player[][]>(EMPTY_BOARD)\n  const [ winningCells, setWinningCells ] = useState<Cell[] | null>(null)\n  const [ isPlayerOneHuman ] = useState<boolean>(true)\n  const [ isPlayerTwoHuman ] = useState<boolean>(false)\n\n  useEffect(() => {\n    if (!isGameOver()) {\n      const shouldAiOneMove = currentPlayer === Player.One && !isPlayerOneHuman\n      const shouldAiTwoMove = currentPlayer === Player.Two && !isPlayerTwoHuman\n      \n      if (shouldAiOneMove || shouldAiTwoMove) {\n        const col = Minimax.nextMove(tokens, currentPlayer)\n        dropToken(col);\n      }\n    }\n  }, [tokens]);\n\n  const dropToken = (colIndex: number) => {\n    if (tokens[colIndex].length < BOARD_ROWS && !winningCells) {\n      const nextTokens = copyBoard(tokens)\n      nextTokens[colIndex].push(currentPlayer)\n\n      const winningCells = findWinningCells(nextTokens)\n      setTokens(nextTokens)\n\n      if (winningCells.length > 0) {\n        setWinningCells(winningCells)\n      } else {\n        setCurrentPlayer(togglePlayer(currentPlayer))\n      }\n    }\n  }\n\n  const resetGame = () => {\n    setTokens(EMPTY_BOARD)\n    setCurrentPlayer(Player.One)\n    setWinningCells(null)\n  }\n\n  const isGameOver = () => {\n    return (winningCells != null) || isFullBoard(tokens)\n  }\n\n  return (\n    <div>\n      <Dropzone\n        currentPlayer={currentPlayer}\n        onClickColumn={dropToken}\n        isDisabled={isGameOver()}\n      />\n      <Board\n        tokens={tokens}\n        highlightedCells={winningCells}\n      />\n      <Button onClick={resetGame}>\n        New Game\n      </Button>\n    </div>\n  )\n}\n","import React from 'react'\nimport { ConnectFour } from './ConnectFour'\n\nconst App = () => (\n  <ConnectFour />\n)\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\nserviceWorker.register();\n"],"sourceRoot":""}